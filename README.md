# Лабораторная работа №3

## Управление памятью и умные указатели

### std::unique_ptr

std::unique_ptr — это специальный тип указателя в C++, который управляет динамически выделенной памятью. Он помогает избежать утечек памяти, автоматически освобождая память, когда указатель выходит из области видимости.

Это продемонстрировано в файле **no_leak**, где в отличие от **leak**, в переменную передаётся не "сырой" указатель, а unique_ptr. Даллее, в цикле происходит многократное move-присваивание и очищение памяти на каждой итерации.

std::unique_ptr может владеть только одним объектом за раз. Это означает, что если у вас есть unique_ptr, вы не можете создать другой unique_ptr, который будет указывать на тот же объект, т.е. этот указатель нельзя копировать, но можно перемещать.

### std::shared_ptr

std::shared_ptr — это умный указатель, который разделяет владение объектом между несколькими указателями. Объект будет автоматически удалён, когда последний std::shared_ptr, ссылающийся на него, будет уничтожен.

В файле **shared_pointer** под shared_ptr создана переменная sp1 типа int со значением 10.
Внутри блока, обозначенного фигурными скобками, sp2 разделяет значение с sp1, увеличивается счётчик ссылок shared_ptr. После закрытия блока sp2 уничтожается, счётчик ссылок уменьшается.

### std::weak_ptr

std::weak_ptr — это умный указатель, который не влияет на время жизни объекта. Он ссылается на объект, управляемый std::shared_ptr, но не увеличивает счётчик ссылок.

В файле **weak_pointer**, аналогично **shared_pointer** переменная sp типа int со значением 42 находится под указателем shared_ptr.
Переменная wp ссылается на sp через weak_ptr. Метод **lock** предоставляет доступ к объекту в weak_ptr, мы можем посмотреть значение в переменной под этим указателем. Методом **reset** уничтожается объект sp, управляемый shared_ptr. Методом **expired** можно проверить существование объекта.